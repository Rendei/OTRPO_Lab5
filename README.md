# Graph Database API Backend

Бекенд реализован на **FastAPI** для работы с базой данных **Neo4j** и обеспечивает доступ к данным графа через REST API.

## Функциональность

- **Получение всех узлов**: Эндпоинт для получения узлов с основными атрибутами.
- **Получение всех связей**: Эндпоинт для получения всех связей между узлами.
- **Получение узла и его связей**: Возвращает указанный узел с его атрибутами и связями.
- **Добавление и удаление узлов и связей**: Управление узлами и их связями, доступное только через авторизованный запрос.

## Установка

### Шаг 1: Клонирование репозитория и установка зависимостей

```bash
git clone https://github.com/Rendei/OTRPO_Lab5.git
cd OTRPO_Lab5
pip install -r requirements.txt
```

### Шаг 2: Настройка окружения

Создайте файл `.config.json` и укажите параметры подключения к Neo4j:
Пример файла `.config.template.json` 

```dotenv
    "neo4j_uri": "neo4j_url",
    "neo4j_user": "neo4j",
    "neo4j_password": "neo4j_pass",
    "auth_token": "real_token"
```

### Шаг 3: Запуск сервера

```bash
uvicorn main:app --reload
```

API будет доступен по адресу: `http://127.0.0.1:8000`.

## API Эндпоинты

- **GET /nodes**: Возвращает список узлов с атрибутами `id`, `label` и `name`.
- **GET /relationships**: Возвращает список отношений с атрибутами `start_node_id`, `relationship_type`, `end_node`.
- **GET /node/{node_id}**: Возвращает узел и его связи с другими узлами.
- **POST /node**: Добавляет узел и его связи (требуется авторизация).
- **DELETE /node/{node_id}**: Удаляет указанный узел и его связи (требуется авторизация).

### Примеры запросов

**Получение всех узлов:**

```bash
curl -X GET "http://127.0.0.1:8000/nodes"
```

**Добавление узла (с авторизацией):**

```bash
curl -X POST "http://127.0.0.1:8000/node" -H "token: <auth_token>" -d "{...}"
```
